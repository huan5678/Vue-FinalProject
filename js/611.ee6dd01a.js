"use strict";(self["webpackChunkchill_bar"]=self["webpackChunkchill_bar"]||[]).push([[611],{6978:function(e,t,a){a.d(t,{Z:function(){return $}});var r=a(2262),o=a(2119),n=a(8262),s=a(9669),c=a.n(s);const d=(0,n.Q_)("admin",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t=(0,r.iH)(""),a=(0,r.iH)(""),n=(0,r.iH)(!1),s=(0,o.tv)(),d=(0,o.yj)(),i=function(){const e=document.cookie.split("; backendToken=");return e.length>1&&e.shift().split(";"),t.value=e,e},u=function(){t.value?(c().defaults.headers.common.Authorization=t.value,c().post(`${e}api/user/check`).then((e=>{n.value=e.data.success,"admin"!==d.name&&s.push("admin")})).catch((e=>{console.dir(e),n.value=e.response.data.success,s.push("login")}))):s.push("login")};function l(e){t.value=e.token,a.value=e.expired,n.value=!0,document.cookie=`backendToken=${e.token}; expires=${new Date(e.expired)};`}function p(){n.value=!1,t.value="",a.value="",c().post(`${e}logout`)}function g(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:t,expired:a,isLoggedIn:n,handleSetLogin:l,handleSetLogout:p,handleCheckUser:u,handleGetToken:i,handleClearToken:g}}));const i=(0,n.Q_)("adminData",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({selectedTarget:"product",selectedTargetIndex:0,dataList:[],pagination:{},currentPage:1,category:null,tempProduct:{},isOpenModal:!1,errorMessage:""}),o=(0,r.qj)({selected:""});function n(){a.tempProduct={}}function s(e,t){o.selected=e,a.tempProduct=t}function i(e=!1){a.isOpenModal=e}const u=d();function l(){let r=a.selectedTarget;switch(r){case"product":r="products/all";break;case"order":r="orders";break;case"coupon":r="coupons";break;case"article":r="articles";break;default:r="products";break}c().get(`${e}api/${t}/admin/${a.selectedTarget}`,{token:u.token}).then((e=>{a.dataList=e.data[`${r}`]})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function p(r,o){let n=a.selectedTarget;switch(n){case"product":n="products";break;case"order":n="orders";break;case"coupon":n="coupons";break;case"article":n="articles";break;default:n="products";break}let s=r;void 0===r&&(s=a.currentPage);let d=`&category=${o}`;null!==o&&void 0!==o||(d=""),c().get(`${e}api/${t}/admin/${n}/?page=${s}${d}`,{token:u.token}).then((e=>{a.dataList=e.data[`${n}`],a.pagination=e.data.pagination})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function g(r,o){c().put(`${e}api/${t}/admin/${a.selectedTarget}/${r}`,o,{token:u.token}).then((()=>{p(a.currentPage,a.category)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function h(r=null){let o=a.selectedTarget;switch(o){case"order":o="orders/all";break;case"coupon":o="coupon";break;case"article":o="article";break;default:o="product";break}c()["delete"](`${e}api/${t}/admin/${o}/${r}`,{token:u.token}).then((()=>{p(a.currentPage,a.category)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function $(r){c().post(`${e}api/${t}/admin/${a.selectedTarget}`,r,{token:u.token}).then((()=>{p(a.currentPage)})).catch((e=>{console.dir(e)}))}function m(a){const r=new FormData;return r.append("file-to-upload",a),c().post(`${e}api/${t}/admin/upload`,r,{token:u.token})}return{adminData:a,functionSelected:o,handleControlModal:i,handleCreateData:$,handleGetDataAll:l,handleGetDataList:p,handleEditData:g,handleDeleteData:h,handleImageUpload:m,handleSelectFunction:s,handleResetTempProduct:n}}));const u=(0,n.Q_)("product",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({products:[],pagination:{},currentPage:1,productDetail:{},selectCategory:"",errorMessage:"",productMainImage:"",productImages:[]}),o=(0,r.iH)(""),n=(0,r.iH)([{title:"全品項",category:"All"},{title:"伏特加",category:"vodka"},{title:"琴酒",category:"gin"},{title:"威士忌",category:"whisky"},{title:"龍舌蘭",category:"tequila"},{title:"蘭姆酒",category:"rum"},{title:"白蘭地",category:"brandy"}]);function s(e){const t=e.filter((e=>""!==e.imageUrl));return t}function d(){c().get(`${e}api/${t}/products/all`).then((e=>{a.products=s(e.data.products)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function i(r="",o=a.currentPage){let n=r;"All"===r&&(n=""),c().get(`${e}api/${t}/products?page=${o}&category=${n}`).then((e=>{a.products=s(e.data.products),a.pagination=e.data.pagination})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function u(e){a.productMainImage=e}function l(r){o.value=r,c()(`${e}api/${t}/product/${r}`).then((e=>{o.value="",a.productDetail=e.data.product,a.productMainImage=e.data.product.imageUrl,a.productImages=[...e.data.product.imagesUrl],a.productImages.push(e.data.product.imageUrl)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`,o.value=""}))}return{productList:a,handleGetProductAll:d,handleGetProductList:i,productCategory:n,handleGetProductDetail:l,handleProductMainImage:u,isLoading:o}}));const l=(0,n.Q_)("order",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),o=(0,r.qj)({success:!1,orders:[],pagination:{},message:[]}),n=(0,r.qj)({success:!1,order:{},total:0,user:{}});function s(r){c().post(`${e}api/${t}/order`,{data:{user:{name:r.name,email:r.email,tel:r.tel,address:r.address},message:r.message}}).then((e=>(a.success=e.data.success,a.message=e.data.message,a.total=e.data.total,a.create_at=e.data.create_at,a.orderId=e.data.orderId,localStorage.setItem("order_id",e.data.orderId),e.data.success))).catch((e=>{console.dir(e)}))}function d(a){c().get(`${e}api/${t}/order/${a}`).then((e=>(n.success=e.data.success,n.order=e.data.order,n.total=e.data.total,n.user=e.data.user,e.data.success))).catch((e=>(console.dir(e),e.response.success)))}function i(){c().get(`${e}api/${t}/orders`).then((e=>{o.success=e.data.success,o.orders=e.data.orders,o.pagination=e.data.pagination,o.message=e.data.message})).catch((e=>{console.dir(e)}))}return{orderResult:a,orderList:o,orderData:n,handleSendOrder:s,handleGetOrderList:i,handleGetOrderData:d}}));const p=(0,n.Q_)("cart",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0,isOpenCart:!1,resultPrice:0,checkoutStep:1,errorMessage:""}),o=(0,r.iH)("");function n(e){a.resultPrice=e}function s(e){a.checkoutStep=e}function d(){c().get(`${e}api/${t}/cart`).then((e=>{a.list=e.data.data.carts,a.totalPrice=e.data.data.total,a.finalPrice=e.data.data.final_total})).catch((e=>{a.errorMessage=e.data.message}))}function i(r,n=1){o.value=r,c().post(`${e}api/${t}/cart`,{data:{product_id:r,qty:n}}).then((e=>{a.data=e.data.data,a.message=e.data.message,o.value="",d()})).catch((e=>{a.errorMessage=e.data.message,o.value=""}))}function u(r){o.value=r,c()["delete"](`${e}api/${t}/cart/${r}`).then((e=>{a.message=e.data.message,o.value="",d()})).catch((e=>{a.errorMessage=e.data.message,o.value=""}))}function l(r,n){o.value=r,c().put(`${e}api/${t}/cart/${r}`,{data:{product_id:r,qty:n}}).then((e=>{a.message=e.data.message,o.value="",d()})).catch((e=>{a.errorMessage=e.data.message,o.value=""}))}function p(){c()["delete"](`${e}api/${t}/carts`).then((e=>{a.message=e.data.message,d()})).catch((e=>{a.errorMessage=e.data.message}))}return{cartData:a,isLoading:o,handleAddCart:i,handleGetCart:d,handleDeleteCart:u,handleUpdateCart:l,handleClearCart:p,handleSetResult:n,handleSetCheckoutStep:s}}));const g=(0,n.Q_)("coupon",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({couponList:[{name:"驚喜大禮包",code:"5d003b6e",price:-550,rules:"minus"},{name:"不是酒折給你打8折",code:"366ea893",price:.8,rules:"cross"},{name:"老闆請你喝一杯",code:"e02c47e7",price:-400,rules:"minus"},{name:"你是醉棒的",code:"db13f8e5",price:-200,rules:"minus"}],message:"",finalTotal:0});function o(r){c().post(`${e}api/${t}/coupon`,{data:{code:r}}).then((e=>(a.message=e.data.message,a.finalTotal=e.data.data.final_total,e.data.success))).catch((e=>{console.dir(e)}))}return{couponData:a,handleUseCoupon:o}}));const h=(0,n.Q_)("bookingDates",(()=>{const e="https://esc-cros-anywhere.herokuapp.com/",t="https://chill-bar-sp.herokuapp.com",a="api/v1",o=(0,r.qj)({bookingList:[],bookingData:{},tempData:{},isLoading:!1,errorMessage:""});function n(){o.tempData={}}function s(){c().get(`${e}${t}/${a}/dates`).then((e=>{o.bookingList=e.data})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}function d(r){c().get(`${e}${t}/${a}/date/${r}`).then((e=>{o.bookingData=e.data.order})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}function i(r,n){c().put(`${e}${t}/${a}/date/${r}`,n).then((()=>{s()})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}function u(r=null){c()["delete"](`${e}${t}/${a}/date/${r}`).then((()=>{s()})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}function l(r){o.isLoading=!0,c().post(`${e}${t}/${a}/date`,r).then((()=>{s(),o.isLoading=!1})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}return{datesData:o,handleGetBookingDataAll:s,handleGetBookingData:d,handleEditBookingData:i,handleDeleteBookingData:u,handleCreateBookingData:l,handleResetTempData:n}}));function $(){const e=d(),t=i(),a=u(),r=l(),o=p(),n=g(),s=h();return{adminStore:e,adminDataStore:t,productStore:a,orderStore:r,cartStore:o,couponStore:n,bookingStore:s}}},5516:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(6252);const o=["href"];function n(e,t,a,n,s,c){const d=(0,r.up)("RouterLink");return n.isExternalLink?((0,r.wg)(),(0,r.iD)("a",(0,r.dG)({key:0},e.$attrs,{rel:"noopener",href:e.to,target:"_blank",class:"py-2 px-3 font-normal text-secondary-500 border-b-2 border-transparent transition duration-300 ease-in-out md:font-thin"}),[(0,r.WI)(e.$slots,"default")],16,o)):((0,r.wg)(),(0,r.j4)(d,(0,r.dG)({key:1},e.$props,{class:["py-2 px-3 font-normal border-b transition duration-300 ease-in-out md:font-thin",n.isActive?"border-primary-300 text-primary-400 cursor-default border-b-2":"border-transparent text-secondary-300\n        hover:border-primary-400 hover:text-primary-400 focus:border-primary-400"]}),{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},16,["class"]))}var s=a(2119),c={props:{...s.rH.props},setup(e){const{route:t,href:a,isActive:o,isExactActive:n,navigate:c}=(0,s.nB)(e),d=(0,r.Fl)((()=>"string"===typeof e.to&&e.to.startsWith("http")));return{isExternalLink:d,href:a,navigate:c,isActive:o,route:t,isExactActive:n}}},d=a(3744);const i=(0,d.Z)(c,[["render",n]]);var u=i}}]);
//# sourceMappingURL=611.ee6dd01a.js.map