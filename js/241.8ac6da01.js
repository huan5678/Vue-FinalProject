"use strict";(self["webpackChunkchill_bar"]=self["webpackChunkchill_bar"]||[]).push([[241],{6978:function(e,a,t){t.d(a,{Z:function(){return m}});var o=t(2262),s=t(2119),n=t(8262),r=t(9669),c=t.n(r);const d=(0,n.Q_)("admin",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",a=(0,o.iH)(""),t=(0,o.iH)(""),n=(0,o.iH)(!1),r=(0,s.tv)(),d=(0,s.yj)(),l=function(){const e=document.cookie.split("; backendToken=");return e.length>1&&e.shift().split(";"),a.value=e,e},i=function(){a.value?(c().defaults.headers.common.Authorization=a.value,c().post(`${e}api/user/check`).then((e=>{n.value=e.data.success,"admin"!==d.name&&r.push("admin")})).catch((e=>{console.dir(e),n.value=e.response.data.success,r.push("login")}))):r.push("login")};function u(e){a.value=e.token,t.value=e.expired,n.value=!0,document.cookie=`backendToken=${e.token}; expires=${new Date(e.expired)};`}function p(){n.value=!1,a.value="",t.value="",c().post(`${e}logout`)}function g(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:a,expired:t,isLoggedIn:n,handleSetLogin:u,handleSetLogout:p,handleCheckUser:i,handleGetToken:l,handleClearToken:g}}));const l=(0,n.Q_)("adminData",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",a="club",t=(0,o.qj)({selectedTarget:"product",selectedTargetIndex:0,dataList:[],pagination:{},currentPage:1,category:null,tempProduct:{},isOpenModal:!1,errorMessage:""}),s=(0,o.qj)({selected:""});function n(){t.tempProduct={}}function r(e,a){s.selected=e,t.tempProduct=a}function l(e=!1){t.isOpenModal=e}const i=d();function u(){let o=t.selectedTarget;switch(o){case"product":o="products/all";break;case"order":o="orders";break;case"coupon":o="coupons";break;case"article":o="articles";break;default:o="products";break}c().get(`${e}api/${a}/admin/${t.selectedTarget}`,{token:i.token}).then((e=>{t.dataList=e.data[`${o}`]})).catch((e=>{t.errorMessage=`產生錯誤: ${e}`}))}function p(o,s){let n=t.selectedTarget;switch(n){case"product":n="products";break;case"order":n="orders";break;case"coupon":n="coupons";break;case"article":n="articles";break;default:n="products";break}let r=o;void 0===o&&(r=t.currentPage);let d=`&category=${s}`;null!==s&&void 0!==s||(d=""),c().get(`${e}api/${a}/admin/${n}/?page=${r}${d}`,{token:i.token}).then((e=>{t.dataList=e.data[`${n}`],t.pagination=e.data.pagination})).catch((e=>{t.errorMessage=`產生錯誤: ${e}`}))}function g(o,s){c().put(`${e}api/${a}/admin/${t.selectedTarget}/${o}`,s,{token:i.token}).then((()=>{p(t.currentPage,t.category)})).catch((e=>{t.errorMessage=`產生錯誤: ${e}`}))}function h(o=null){let s=t.selectedTarget;switch(s){case"order":s="orders/all";break;case"coupon":s="coupon";break;case"article":s="article";break;default:s="product";break}c()["delete"](`${e}api/${a}/admin/${s}/${o}`,{token:i.token}).then((()=>{p(t.currentPage,t.category)})).catch((e=>{t.errorMessage=`產生錯誤: ${e}`}))}function m(o){c().post(`${e}api/${a}/admin/${t.selectedTarget}`,o,{token:i.token}).then((()=>{p(t.currentPage)})).catch((e=>{console.dir(e)}))}function $(t){const o=new FormData;return o.append("file-to-upload",t),c().post(`${e}api/${a}/admin/upload`,o,{token:i.token})}return{adminData:t,functionSelected:s,handleControlModal:l,handleCreateData:m,handleGetDataAll:u,handleGetDataList:p,handleEditData:g,handleDeleteData:h,handleImageUpload:$,handleSelectFunction:r,handleResetTempProduct:n}}));const i=(0,n.Q_)("product",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",a="club",t=(0,o.qj)({products:[],pagination:{},currentPage:1,productDetail:{},selectCategory:"",errorMessage:"",productMainImage:"",productImages:[]}),s=(0,o.iH)(""),n=(0,o.iH)([{title:"全品項",category:"All"},{title:"伏特加",category:"vodka"},{title:"琴酒",category:"gin"},{title:"威士忌",category:"whisky"},{title:"龍舌蘭",category:"tequila"},{title:"蘭姆酒",category:"rum"},{title:"白蘭地",category:"brandy"}]);function r(e){const a=e.filter((e=>""!==e.imageUrl));return a}function d(){c().get(`${e}api/${a}/products/all`).then((e=>{t.products=r(e.data.products)})).catch((e=>{t.errorMessage=`產生錯誤: ${e}`}))}function l(o="",s=t.currentPage){let n=o;"All"===o&&(n=""),c().get(`${e}api/${a}/products?page=${s}&category=${n}`).then((e=>{t.products=r(e.data.products),t.pagination=e.data.pagination})).catch((e=>{t.errorMessage=`產生錯誤: ${e}`}))}function i(e){t.productMainImage=e}function u(o){s.value=o,c()(`${e}api/${a}/product/${o}`).then((e=>{s.value="",t.productDetail=e.data.product,t.productMainImage=e.data.product.imageUrl,t.productImages=[...e.data.product.imagesUrl],t.productImages.push(e.data.product.imageUrl)})).catch((e=>{t.errorMessage=`產生錯誤: ${e}`,s.value=""}))}return{productList:t,handleGetProductAll:d,handleGetProductList:l,productCategory:n,handleGetProductDetail:u,handleProductMainImage:i,isLoading:s}}));const u=(0,n.Q_)("order",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",a="club",t=(0,o.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),s=(0,o.qj)({success:!1,orders:[],pagination:{},message:[]}),n=(0,o.qj)({success:!1,order:{},total:0,user:{}});function r(o){c().post(`${e}api/${a}/order`,{data:{user:{name:o.name,email:o.email,tel:o.tel,address:o.address},message:o.message}}).then((e=>(t.success=e.data.success,t.message=e.data.message,t.total=e.data.total,t.create_at=e.data.create_at,t.orderId=e.data.orderId,localStorage.setItem("order_id",e.data.orderId),e.data.success))).catch((e=>{console.dir(e)}))}function d(t){c().get(`${e}api/${a}/order/${t}`).then((e=>(n.success=e.data.success,n.order=e.data.order,n.total=e.data.total,n.user=e.data.user,e.data.success))).catch((e=>(console.dir(e),e.response.success)))}function l(){c().get(`${e}api/${a}/orders`).then((e=>{s.success=e.data.success,s.orders=e.data.orders,s.pagination=e.data.pagination,s.message=e.data.message})).catch((e=>{console.dir(e)}))}return{orderResult:t,orderList:s,orderData:n,handleSendOrder:r,handleGetOrderList:l,handleGetOrderData:d}}));const p=(0,n.Q_)("cart",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",a="club",t=(0,o.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0,isOpenCart:!1,resultPrice:0,checkoutStep:1,errorMessage:""}),s=(0,o.iH)("");function n(e){t.resultPrice=e}function r(e){t.checkoutStep=e}function d(){c().get(`${e}api/${a}/cart`).then((e=>{t.list=e.data.data.carts,t.totalPrice=e.data.data.total,t.finalPrice=e.data.data.final_total})).catch((e=>{t.errorMessage=e.data.message}))}function l(o,n=1){s.value=o,c().post(`${e}api/${a}/cart`,{data:{product_id:o,qty:n}}).then((e=>{t.data=e.data.data,t.message=e.data.message,s.value="",d()})).catch((e=>{t.errorMessage=e.data.message,s.value=""}))}function i(o){s.value=o,c()["delete"](`${e}api/${a}/cart/${o}`).then((e=>{t.message=e.data.message,s.value="",d()})).catch((e=>{t.errorMessage=e.data.message,s.value=""}))}function u(o,n){s.value=o,c().put(`${e}api/${a}/cart/${o}`,{data:{product_id:o,qty:n}}).then((e=>{t.message=e.data.message,s.value="",d()})).catch((e=>{t.errorMessage=e.data.message,s.value=""}))}function p(){c()["delete"](`${e}api/${a}/carts`).then((e=>{t.message=e.data.message,d()})).catch((e=>{t.errorMessage=e.data.message}))}return{cartData:t,isLoading:s,handleAddCart:l,handleGetCart:d,handleDeleteCart:i,handleUpdateCart:u,handleClearCart:p,handleSetResult:n,handleSetCheckoutStep:r}}));const g=(0,n.Q_)("coupon",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",a="club",t=(0,o.qj)({couponList:[{name:"驚喜大禮包",code:"5d003b6e",price:-550,rules:"minus"},{name:"不是酒折給你打8折",code:"366ea893",price:.8,rules:"cross"},{name:"老闆請你喝一杯",code:"e02c47e7",price:-400,rules:"minus"},{name:"你是醉棒的",code:"db13f8e5",price:-200,rules:"minus"}],message:"",finalTotal:0});function s(o){c().post(`${e}api/${a}/coupon`,{data:{code:o}}).then((e=>(t.message=e.data.message,t.finalTotal=e.data.data.final_total,e.data.success))).catch((e=>{console.dir(e)}))}return{couponData:t,handleUseCoupon:s}}));const h=(0,n.Q_)("bookingDates",(()=>{const e="https://esc-cros-anywhere.herokuapp.com/",a="https://chill-bar-sp.herokuapp.com",t="api/v1",s=(0,o.qj)({bookingList:[],bookingData:{},tempData:{},isLoading:!1,errorMessage:""});function n(){s.tempData={}}function r(){c().get(`${e}${a}/${t}/dates`).then((e=>{s.bookingList=e.data})).catch((e=>{s.errorMessage=`產生錯誤: ${e}`}))}function d(o){c().get(`${e}${a}/${t}/date/${o}`).then((e=>{s.bookingData=e.data.order})).catch((e=>{s.errorMessage=`產生錯誤: ${e}`}))}function l(o,n){c().put(`${e}${a}/${t}/date/${o}`,n).then((()=>{r()})).catch((e=>{s.errorMessage=`產生錯誤: ${e}`}))}function i(o=null){c()["delete"](`${e}${a}/${t}/date/${o}`).then((()=>{r()})).catch((e=>{s.errorMessage=`產生錯誤: ${e}`}))}function u(o){s.isLoading=!0,c().post(`${e}${a}/${t}/date`,o).then((()=>{r(),s.isLoading=!1})).catch((e=>{s.errorMessage=`產生錯誤: ${e}`}))}return{datesData:s,handleGetBookingDataAll:r,handleGetBookingData:d,handleEditBookingData:l,handleDeleteBookingData:i,handleCreateBookingData:u,handleResetTempData:n}}));function m(){const e=d(),a=l(),t=i(),o=u(),s=p(),n=g(),r=h();return{adminStore:e,adminDataStore:a,productStore:t,orderStore:o,cartStore:s,couponStore:n,bookingStore:r}}},9241:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var o=t(6252),s=t(9963),n=t(3577);const r={class:"flex justify-center items-center h-screen bg-gray-50"},c={class:"container max-w-lg"},d=(0,o._)("legend",{class:"text-3xl font-medium tracking-wide text-center text-primary-600"},"管理者登入",-1),l={class:"form-control"},i=(0,o._)("label",{for:"name",class:"font-normal label"},[(0,o._)("span",{class:"label-text"},"使用者帳號")],-1),u={class:"form-control"},p=(0,o._)("label",{for:"password",class:"font-normal label"},[(0,o._)("span",{class:"label-text"},"使用者密碼")],-1),g=(0,o._)("button",{type:"submit",class:"w-full text-secondary-50 bg-secondary-400 hover:bg-secondary-600 rounded-lg transition duration-300 btn"}," 登入 ",-1),h={class:"mb-2 text-center"};function m(e,a,t,m,$,f){const k=(0,o.up)("AlertModal");return(0,o.wg)(),(0,o.iD)("main",r,[(0,o._)("div",c,[(0,o._)("form",{class:"p-8 space-y-8 bg-white rounded shadow-sm",onSubmit:a[2]||(a[2]=(0,s.iM)(((...e)=>m.handlerSubmit&&m.handlerSubmit(...e)),["prevent"]))},[d,(0,o._)("div",l,[i,(0,o.wy)((0,o._)("input",{id:"name",type:"text",name:"userName",placeholder:"請輸入帳號Email","onUpdate:modelValue":a[0]||(a[0]=e=>m.userName=e),class:"input form-style"},null,512),[[s.nr,m.userName,void 0,{trim:!0}]])]),(0,o._)("div",u,[p,(0,o.wy)((0,o._)("input",{id:"password",type:"password",class:"input form-style","onUpdate:modelValue":a[1]||(a[1]=e=>m.userPassword=e),placeholder:"請輸入密碼"},null,512),[[s.nr,m.userPassword]])]),g],32)]),(0,o.Wm)(k,{modelValue:m.openModal,"onUpdate:modelValue":a[3]||(a[3]=e=>m.openModal=e),onHandleCloseModal:m.handleCloseModal},{title:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(m.modalMessage.title),1)])),default:(0,o.w5)((()=>[(0,o._)("p",h,(0,n.zw)(m.modalMessage.message),1),(0,o._)("p",null,(0,n.zw)(m.modalMessage.detail),1)])),_:1},8,["modelValue","onHandleCloseModal"])])}var $=t(2262),f=t(2119),k=t(9669),v=t.n(k),b=t(6978),M={setup(){const e="https://vue3-course-api.hexschool.io/v2/",{adminStore:a}=(0,b.Z)(),{handleSetLogin:t,handleCheckUser:s,handleGetToken:n}=a,r=(0,f.tv)(),c=(0,$.iH)(""),d=(0,$.iH)(""),l=(0,$.qj)({title:"",message:"",detail:""}),i=(0,$.iH)(!1);function u(){const a=c.value,o=d.value;v().post(`${e}admin/signin`,{username:a,password:o}).then((e=>{const a={token:e.data.token,expired:e.data.expired};t(a),l.message=e.data.message,l.title="登入成功",i.value=!0,setTimeout((()=>{i.value=!1,r.push("/admin")}),3e3)})).catch((e=>{l.message=e.response.data.message,l.detail=e.response.data.error.message,l.title="登入失敗",i.value=!0}))}function p(){i.value=!1}return(0,o.wF)((()=>{n(),s()})),{userName:c,userPassword:d,handlerSubmit:u,openModal:i,handleCloseModal:p,modalMessage:l}}},y=t(3744);const D=(0,y.Z)(M,[["render",m]]);var _=D}}]);
//# sourceMappingURL=241.8ac6da01.js.map