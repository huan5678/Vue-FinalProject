"use strict";(self["webpackChunkchill_bar"]=self["webpackChunkchill_bar"]||[]).push([[958],{9939:function(e,t,a){a.d(t,{Z:function(){return h}});var l=a(6252),r=a(3577);const s={class:"container"},n={class:"flex gap-4 justify-between"},o={class:"tracking-[.25rem]"},c=(0,l._)("br",null,null,-1);function i(e,t,a,i,d,u){return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("ul",n,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.data,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:e.title,class:(0,r.C_)(["flex-grow p-1 rfs:text-base font-light text-center md:rfs:text-lg",i.action===String(t+1)?"bg-secondary-500 text-primary-300":"border-secondary-700 text-secondary-400"])},[(0,l._)("span",{class:(0,r.C_)(["block py-2 border lg:py-2",i.action===String(t+1)?"border-primary-300":"border-secondary-400"])},[(0,l._)("span",o,(0,r.zw)(e.title),1),c,(0,l.Uk)((0,r.zw)(e.content),1)],2)],2)))),128))])])}var d=a(2262),u={props:{active:String},setup(e){const t=(0,d.qj)([{title:"STEP1",content:"確認訂單"},{title:"STEP2",content:"建立訂單"},{title:"STEP3",content:"完成訂單"}]),a=(0,d.Vh)(e,"active");return{data:t,action:a}}},m=a(3744);const p=(0,m.Z)(u,[["render",i]]);var h=p},9958:function(e,t,a){a.r(t),a.d(t,{default:function(){return te}});var l=a(6252),r=a(3577),s=a(9963);const n=e=>((0,l.dD)("data-v-769f270e"),e=e(),(0,l.Cn)(),e),o={class:"py-8 bg-gray-200"},c={class:"container"},i={class:"flex flex-wrap gap-4 justify-between lg:flex-nowrap"},d={class:"flex flex-col flex-auto pb-4 space-y-8 w-full border-b border-secondary-500 md:w-2/3 lg:pt-14 lg:border-0"},u=n((()=>(0,l._)("h1",{class:"py-4 text-2xl font-medium text-center"},"訂單內容",-1))),m={id:"list",class:"overflow-y-auto space-y-4 max-h-[50vh]"},p={class:"flex gap-4"},h=["src","alt"],g={class:"space-y-4"},b={class:"text-xl font-medium"},f={class:"block font-mono tracking-wider"},w={class:"font-mono tracking-widest"},y={class:"flex justify-between"},x={class:"flex justify-start items-center p-4"},_={class:"gap-2 cursor-pointer label"},v=n((()=>(0,l._)("span",{class:"text-lg"},"還想加購點什麼",-1))),L={class:"text-right"},k={key:0,class:"text-2xl text-center text-secondary-500"},C={key:1,class:"mb-2 rfs:text-lg font-medium"},S=(0,l.Uk)(" 已套用折價券"),F=n((()=>(0,l._)("br",null,null,-1))),R={class:"rfs:text-xl font-light"},D={class:"rfs:text-2xl font-medium tracking-widest"},P=n((()=>(0,l._)("div",{class:"lg:divider lg:divider-horizontal"},null,-1))),Z=(0,l.Uk)("現在我想來點");function q(e,t,a,n,q,E){const U=(0,l.up)("CheckStep"),j=(0,l.up)("OrderForm"),z=(0,l.up)("TheRecommend"),T=(0,l.up)("AlertModal");return(0,l.wg)(),(0,l.iD)("section",o,[(0,l.Wm)(U,{active:"1"}),(0,l._)("div",c,[(0,l._)("div",i,[(0,l._)("div",d,[u,(0,l._)("ul",m,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.cartList,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id,class:"flex gap-4 justify-between items-center px-4 pb-4 border-b border-secondary-200"},[(0,l._)("div",p,[(0,l._)("img",{class:"object-cover w-20 h-20",src:e.product.imageUrl,alt:e.product.title},null,8,h),(0,l._)("div",g,[(0,l._)("h3",b,(0,r.zw)(e.product.title),1),(0,l._)("span",f,"數量："+(0,r.zw)(e.qty),1)])]),(0,l._)("span",w," NT$"+(0,r.zw)(n.moneyFormat(e.product.price,e.qty)),1)])))),128))]),(0,l._)("div",y,[(0,l._)("div",x,[(0,l._)("label",_,[v,(0,l.wy)((0,l._)("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":t[0]||(t[0]=e=>n.showRecommended=e)},null,512),[[s.e8,n.showRecommended]])])]),(0,l._)("div",L,[0===n.cartList.length?((0,l.wg)(),(0,l.iD)("p",k," 您的購物車是空的 ")):(0,l.kq)("",!0),n.checkCoupon?.name?((0,l.wg)(),(0,l.iD)("p",C,[S,F,(0,l._)("span",R,(0,r.zw)(n.checkCoupon?.name),1)])):(0,l.kq)("",!0),(0,l.wy)((0,l._)("p",D," 總金額 ",512),[[s.F8,n.cartList.length>0]]),(0,l.wy)((0,l._)("p",{class:"font-mono text-xl font-extralight"}," NT$"+(0,r.zw)(n.cartResultPrice),513),[[s.F8,n.cartList.length>0]])])])]),P,(0,l.Wm)(j)]),(0,l.Wm)(T,{class:"select-none",modelValue:n.showRecommended,"onUpdate:modelValue":t[1]||(t[1]=e=>n.showRecommended=e),onHandleCloseModal:n.handleCloseModal,closeButton:!1},{title:(0,l.w5)((()=>[Z])),default:(0,l.w5)((()=>[n.showRecommended?((0,l.wg)(),(0,l.j4)(z,{key:0,title:"還有些好貨",titleClass:"rfs:text-2xl",class:"text-secondary-700 bg-transparent",limit:"10"})):(0,l.kq)("",!0)])),_:1},8,["modelValue","onHandleCloseModal"])])])}var E=a(6978),U=a(2262),j=a(8262),z=a(2119);const T={id:"order",class:"container py-4 lg:pt-14 lg:pb-20"},W=(0,l._)("h2",{class:"mb-8 text-2xl font-medium text-center"},"填寫訂單資料",-1),H={class:"flex flex-wrap gap-6 justify-between items-start mb-6 lg:flex-nowrap"},N=["disabled"],V={class:"pt-12"},I=["disabled"];function M(e,t,a,n,o,c){const i=(0,l.up)("InputField"),d=(0,l.up)("Form");return(0,l.wg)(),(0,l.iD)("section",T,[W,(0,l.Wm)(d,{action:"",class:"mx-auto space-y-4",onSubmit:n.handleSubmit,"validation-schema":n.schema},{default:(0,l.w5)((()=>[(0,l._)("div",H,[(0,l.Wm)(i,{name:"userName",type:"text",label:"訂購人姓名",placeholder:"請輸入姓名",disabled:0===n.cartListLength,class:(0,r.C_)({"opacity-30 cursor-not-allowed":0===n.cartListLength})},null,8,["disabled","class"]),(0,l.Wm)(i,{name:"userPhone",type:"tel",maxlength:"10",label:"訂購人電話",placeholder:"請輸入電話",disabled:0===n.cartListLength,class:(0,r.C_)({"opacity-30 cursor-not-allowed":0===n.cartListLength})},null,8,["disabled","class"])]),(0,l.Wm)(i,{name:"userEmail",type:"email",label:"訂購人Email",placeholder:"請輸入Email",disabled:0===n.cartListLength,class:(0,r.C_)({"opacity-30 cursor-not-allowed":0===n.cartListLength})},null,8,["disabled","class"]),(0,l.Wm)(i,{name:"userAddress",type:"text",label:"訂購人地址",placeholder:"請輸入地址",disabled:0===n.cartListLength,class:(0,r.C_)({"opacity-30 cursor-not-allowed":0===n.cartListLength})},null,8,["disabled","class"]),(0,l._)("div",null,[(0,l._)("label",{for:"userRemark",class:(0,r.C_)(["block mb-2",{"opacity-30 cursor-not-allowed":0===n.cartListLength}])},"備註",2),(0,l.wy)((0,l._)("textarea",{id:"userRemark",name:"userRemark",class:(0,r.C_)(["w-full form-style",{"opacity-30 cursor-not-allowed":0===n.cartListLength}]),rows:"4",placeholder:"想要告訴我們什麼？","onUpdate:modelValue":t[0]||(t[0]=e=>n.userRemark=e),disabled:0===n.cartListLength},null,10,N),[[s.nr,n.userRemark]])]),(0,l._)("div",V,[(0,l._)("button",{type:"submit",class:(0,r.C_)(["w-full text-xl font-medium text-white bg-secondary-700 hover:bg-primary-600 active:bg-primary-500 rounded border-none transition duration-300 ease-in-out btn",{"opacity-30 cursor-not-allowed":0===n.cartListLength}]),disabled:0===n.cartListLength},(0,r.zw)(n.cartListLength>0?"送出訂單資料":"目前購物車沒有商品"),11,I)])])),_:1},8,["onSubmit","validation-schema"])])}var A=a(2954),Y=a(4231),O=a(9760),K={components:{Form:A.l0,InputField:O.Z},setup(){const{orderStore:e,cartStore:t}=(0,E.Z)(),{handleSendOrder:a}=e,{cartData:r}=t,s=(0,U.iH)(""),n=/09\d{2}-?\d{3}-?\d{3}/,o=Y.Ry().shape({userName:Y.Z_().trim().required("請輸入姓名"),userEmail:Y.Z_().trim().email("請輸入正確的Email信箱").required("請輸入Email"),userPhone:Y.Z_().test("phone","請輸入正確的10碼手機號碼(09...)",(e=>n.test(e))).required("請輸入電話號碼"),userAddress:Y.Z_().required("請輸入寄件地址")});function c(e,t){const l={name:e.userName,email:e.userEmail,tel:e.userPhone,address:e.userAddress,message:s.value};a(l),s.value="",t.resetForm()}return{handleSubmit:c,schema:o,userRemark:s,cartListLength:(0,l.Fl)((()=>r.list.length))}}},$=a(3744);const B=(0,$.Z)(K,[["render",M]]);var G=B,J=a(9939),Q=a(7015),X={components:{OrderForm:G,CheckStep:J.Z,TheRecommend:Q.Z},setup(){const{cartStore:e,couponStore:t,orderStore:a}=(0,E.Z)(),{cartData:r,handleGetCart:s,handleDeleteCart:n,handleClearCart:o,handleUpdateCart:c}=e,{couponData:i,handleUseCoupon:d}=t,{orderResult:u}=(0,j.Jk)(a),m=(0,U.iH)(!1),p=(0,z.tv)();function h(e,t){let a=e;return void 0!==t&&(a*=t),void 0!==e?Number(a.toFixed(1)).toLocaleString():0}function g(){p.push("confirm")}(0,l.YP)((()=>r.cart),(e=>{e.length>0&&s()})),(0,l.YP)((()=>u.value.success),(e=>{!0===e&&(g(),localStorage.removeItem("coupon"))}));const b=(0,U.iH)(""),f=(0,l.Fl)((()=>i.couponList)),w=localStorage.getItem("coupon");function y(){m.value=!1}return(0,l.bv)((()=>{s(),null!==w&&(d(w),[b.value]=f.value.filter((e=>e.code===w)))})),{cartList:(0,l.Fl)((()=>r.list)),cartTotalPrice:(0,l.Fl)((()=>h(r.totalPrice))),cartFinalPrice:(0,l.Fl)((()=>h(r.finalPrice))),cartResultPrice:(0,l.Fl)((()=>r.resultPrice)),handleDeleteCart:n,handleClearCart:o,handleUpdateCart:c,moneyFormat:h,showRecommended:m,checkCoupon:b,orderResult:u,handleCloseModal:y}}};const ee=(0,$.Z)(X,[["render",q],["__scopeId","data-v-769f270e"]]);var te=ee}}]);
//# sourceMappingURL=958.48a8e24b.js.map