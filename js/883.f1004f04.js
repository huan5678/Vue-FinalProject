"use strict";(self["webpackChunkchill_bar"]=self["webpackChunkchill_bar"]||[]).push([[883],{6978:function(e,t,a){a.d(t,{Z:function(){return m}});var r=a(2262),o=a(2119),s=a(8262),n=a(9669),c=a.n(n);const d=(0,s.Q_)("admin",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t=(0,r.iH)(""),a=(0,r.iH)(""),s=(0,r.iH)(!1),n=(0,o.tv)(),d=(0,o.yj)(),l=function(){const e=document.cookie.split("; backendToken=");return e.length>1&&e.shift().split(";"),t.value=e,e},i=function(){t.value?(c().defaults.headers.common.Authorization=t.value,c().post(`${e}api/user/check`).then((e=>{s.value=e.data.success,"admin"!==d.name&&n.push("admin")})).catch((e=>{console.dir(e),s.value=e.response.data.success,n.push("login")}))):n.push("login")};function u(e){t.value=e.token,a.value=e.expired,s.value=!0,document.cookie=`backendToken=${e.token}; expires=${new Date(e.expired)};`}function p(){s.value=!1,t.value="",a.value="",c().post(`${e}logout`)}function g(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:t,expired:a,isLoggedIn:s,handleSetLogin:u,handleSetLogout:p,handleCheckUser:i,handleGetToken:l,handleClearToken:g}}));const l=(0,s.Q_)("adminData",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({selectedTarget:"product",selectedTargetIndex:0,dataList:[],pagination:{},currentPage:1,category:null,tempProduct:{},isOpenModal:!1,errorMessage:""}),o=(0,r.qj)({selected:""});function s(){a.tempProduct={}}function n(e,t){o.selected=e,a.tempProduct=t}function l(e=!1){a.isOpenModal=e}const i=d();function u(){let r=a.selectedTarget;switch(r){case"product":r="products/all";break;case"order":r="orders";break;case"coupon":r="coupons";break;case"article":r="articles";break;default:r="products";break}c().get(`${e}api/${t}/admin/${a.selectedTarget}`,{token:i.token}).then((e=>{a.dataList=e.data[`${r}`]})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function p(r,o){let s=a.selectedTarget;switch(s){case"product":s="products";break;case"order":s="orders";break;case"coupon":s="coupons";break;case"article":s="articles";break;default:s="products";break}let n=r;void 0===r&&(n=a.currentPage);let d=`&category=${o}`;null!==o&&void 0!==o||(d=""),c().get(`${e}api/${t}/admin/${s}/?page=${n}${d}`,{token:i.token}).then((e=>{a.dataList=e.data[`${s}`],a.pagination=e.data.pagination})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function g(r,o){c().put(`${e}api/${t}/admin/${a.selectedTarget}/${r}`,o,{token:i.token}).then((()=>{p(a.currentPage,a.category)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function h(r=null){let o=a.selectedTarget;switch(o){case"order":o="orders/all";break;case"coupon":o="coupon";break;case"article":o="article";break;default:o="product";break}c()["delete"](`${e}api/${t}/admin/${o}/${r}`,{token:i.token}).then((()=>{p(a.currentPage,a.category)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function m(r){c().post(`${e}api/${t}/admin/${a.selectedTarget}`,r,{token:i.token}).then((()=>{p(a.currentPage)})).catch((e=>{console.dir(e)}))}function f(a){const r=new FormData;return r.append("file-to-upload",a),c().post(`${e}api/${t}/admin/upload`,r,{token:i.token})}return{adminData:a,functionSelected:o,handleControlModal:l,handleCreateData:m,handleGetDataAll:u,handleGetDataList:p,handleEditData:g,handleDeleteData:h,handleImageUpload:f,handleSelectFunction:n,handleResetTempProduct:s}}));const i=(0,s.Q_)("product",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({products:[],pagination:{},currentPage:1,productDetail:{},selectCategory:"",errorMessage:"",productMainImage:"",productImages:[]}),o=(0,r.iH)(""),s=(0,r.iH)([{title:"全品項",category:"All"},{title:"伏特加",category:"vodka"},{title:"琴酒",category:"gin"},{title:"威士忌",category:"whisky"},{title:"龍舌蘭",category:"tequila"},{title:"蘭姆酒",category:"rum"},{title:"白蘭地",category:"brandy"}]);function n(e){const t=e.filter((e=>""!==e.imageUrl));return t}function d(){c().get(`${e}api/${t}/products/all`).then((e=>{a.products=n(e.data.products)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function l(r="",o=a.currentPage){let s=r;"All"===r&&(s=""),c().get(`${e}api/${t}/products?page=${o}&category=${s}`).then((e=>{a.products=n(e.data.products),a.pagination=e.data.pagination})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function i(e){a.productMainImage=e}function u(r){o.value=r,c()(`${e}api/${t}/product/${r}`).then((e=>{o.value="",a.productDetail=e.data.product,a.productMainImage=e.data.product.imageUrl,a.productImages=[...e.data.product.imagesUrl],a.productImages.push(e.data.product.imageUrl)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`,o.value=""}))}return{productList:a,handleGetProductAll:d,handleGetProductList:l,productCategory:s,handleGetProductDetail:u,handleProductMainImage:i,isLoading:o}}));const u=(0,s.Q_)("order",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),o=(0,r.qj)({success:!1,orders:[],pagination:{},message:[]}),s=(0,r.qj)({success:!1,order:{},total:0,user:{}});function n(r){c().post(`${e}api/${t}/order`,{data:{user:{name:r.name,email:r.email,tel:r.tel,address:r.address},message:r.message}}).then((e=>(a.success=e.data.success,a.message=e.data.message,a.total=e.data.total,a.create_at=e.data.create_at,a.orderId=e.data.orderId,localStorage.setItem("order_id",e.data.orderId),e.data.success))).catch((e=>{console.dir(e)}))}function d(a){c().get(`${e}api/${t}/order/${a}`).then((e=>(s.success=e.data.success,s.order=e.data.order,s.total=e.data.total,s.user=e.data.user,e.data.success))).catch((e=>(console.dir(e),e.response.success)))}function l(){c().get(`${e}api/${t}/orders`).then((e=>{o.success=e.data.success,o.orders=e.data.orders,o.pagination=e.data.pagination,o.message=e.data.message})).catch((e=>{console.dir(e)}))}return{orderResult:a,orderList:o,orderData:s,handleSendOrder:n,handleGetOrderList:l,handleGetOrderData:d}}));const p=(0,s.Q_)("cart",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0,isOpenCart:!1,resultPrice:0,checkoutStep:1,errorMessage:""}),o=(0,r.iH)("");function s(e){a.resultPrice=e}function n(e){a.checkoutStep=e}function d(){c().get(`${e}api/${t}/cart`).then((e=>{a.list=e.data.data.carts,a.totalPrice=e.data.data.total,a.finalPrice=e.data.data.final_total})).catch((e=>{a.errorMessage=e.data.message}))}function l(r,s=1){o.value=r,c().post(`${e}api/${t}/cart`,{data:{product_id:r,qty:s}}).then((e=>{a.data=e.data.data,a.message=e.data.message,o.value="",d()})).catch((e=>{a.errorMessage=e.data.message,o.value=""}))}function i(r){o.value=r,c()["delete"](`${e}api/${t}/cart/${r}`).then((e=>{a.message=e.data.message,o.value="",d()})).catch((e=>{a.errorMessage=e.data.message,o.value=""}))}function u(r,s){o.value=r,c().put(`${e}api/${t}/cart/${r}`,{data:{product_id:r,qty:s}}).then((e=>{a.message=e.data.message,o.value="",d()})).catch((e=>{a.errorMessage=e.data.message,o.value=""}))}function p(){c()["delete"](`${e}api/${t}/carts`).then((e=>{a.message=e.data.message,d()})).catch((e=>{a.errorMessage=e.data.message}))}return{cartData:a,isLoading:o,handleAddCart:l,handleGetCart:d,handleDeleteCart:i,handleUpdateCart:u,handleClearCart:p,handleSetResult:s,handleSetCheckoutStep:n}}));const g=(0,s.Q_)("coupon",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,r.qj)({couponList:[{name:"驚喜大禮包",code:"5d003b6e",price:-550,rules:"minus"},{name:"不是酒折給你打8折",code:"366ea893",price:.8,rules:"cross"},{name:"老闆請你喝一杯",code:"e02c47e7",price:-400,rules:"minus"},{name:"你是醉棒的",code:"db13f8e5",price:-200,rules:"minus"}],message:"",finalTotal:0});function o(r){c().post(`${e}api/${t}/coupon`,{data:{code:r}}).then((e=>(a.message=e.data.message,a.finalTotal=e.data.data.final_total,e.data.success))).catch((e=>{console.dir(e)}))}return{couponData:a,handleUseCoupon:o}}));const h=(0,s.Q_)("bookingDates",(()=>{const e="https://esc-cros-anywhere.herokuapp.com/",t="https://chill-bar-sp.herokuapp.com",a="api/v1",o=(0,r.qj)({bookingList:[],bookingData:{},tempData:{},isLoading:!1,errorMessage:""});function s(){o.tempData={}}function n(){c().get(`${e}${t}/${a}/dates`).then((e=>{o.bookingList=e.data})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}function d(r){c().get(`${e}${t}/${a}/date/${r}`).then((e=>{o.bookingData=e.data.order})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}function l(r,s){c().put(`${e}${t}/${a}/date/${r}`,s).then((()=>{n()})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}function i(r=null){c()["delete"](`${e}${t}/${a}/date/${r}`).then((()=>{n()})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}function u(r){o.isLoading=!0,c().post(`${e}${t}/${a}/date`,r).then((()=>{n(),o.isLoading=!1})).catch((e=>{o.errorMessage=`產生錯誤: ${e}`}))}return{datesData:o,handleGetBookingDataAll:n,handleGetBookingData:d,handleEditBookingData:l,handleDeleteBookingData:i,handleCreateBookingData:u,handleResetTempData:s}}));function m(){const e=d(),t=l(),a=i(),r=u(),o=p(),s=g(),n=h();return{adminStore:e,adminDataStore:t,productStore:a,orderStore:r,cartStore:o,couponStore:s,bookingStore:n}}},9939:function(e,t,a){a.d(t,{Z:function(){return h}});var r=a(6252),o=a(3577);const s={class:"container"},n={class:"flex gap-4 justify-between"},c={class:"tracking-[.25rem]"},d=(0,r._)("br",null,null,-1);function l(e,t,a,l,i,u){return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("ul",n,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.data,((e,t)=>((0,r.wg)(),(0,r.iD)("li",{key:e.title,class:(0,o.C_)(["flex-grow p-1 rfs:text-base font-light text-center md:rfs:text-lg",l.action===String(t+1)?"bg-secondary-500 text-primary-300":"border-secondary-700 text-secondary-400"])},[(0,r._)("span",{class:(0,o.C_)(["block py-2 border lg:py-2",l.action===String(t+1)?"border-primary-300":"border-secondary-400"])},[(0,r._)("span",c,(0,o.zw)(e.title),1),d,(0,r.Uk)((0,o.zw)(e.content),1)],2)],2)))),128))])])}var i=a(2262),u={props:{active:String},setup(e){const t=(0,i.qj)([{title:"STEP1",content:"確認訂單"},{title:"STEP2",content:"建立訂單"},{title:"STEP3",content:"完成訂單"}]),a=(0,i.Vh)(e,"active");return{data:t,action:a}}},p=a(3744);const g=(0,p.Z)(u,[["render",l]]);var h=g},3883:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});var r=a(6252),o=a(3577);const s=e=>((0,r.dD)("data-v-0b10de94"),e=e(),(0,r.Cn)(),e),n={class:"py-8 min-h-[80vh] bg-gray-200"},c={class:"container pt-4"},d={key:0,class:"flex flex-wrap gap-4 justify-between lg:flex-nowrap"},l={class:"flex flex-col flex-auto justify-between pb-4 w-full border-b border-secondary-500 md:w-2/3 lg:pt-14 lg:pb-20 lg:border-0"},i=s((()=>(0,r._)("h2",{class:"py-4 text-2xl font-medium text-center"},"訂單內容",-1))),u={id:"list",class:"overflow-y-auto space-y-4 max-h-[50vh]"},p={class:"flex gap-4"},g=["src","alt"],h={class:"space-y-4"},m={class:"text-xl font-medium"},f={class:"block font-mono tracking-wider"},$={class:"font-mono tracking-widest"},b={class:"pt-4 space-y-2 text-right"},v=s((()=>(0,r._)("li",{class:"text-xl font-medium tracking-widest"}," 總金額 ",-1))),k={class:"pb-2 font-mono text-2xl font-extralight border-b border-secondary-200"},y=s((()=>(0,r._)("li",{class:"text-lg font-medium tracking-widest"}," 訂單是否完成付款 ",-1))),x={class:"text-xl font-medium tracking-widest"},_=s((()=>(0,r._)("div",{class:"lg:divider lg:divider-horizontal"},null,-1))),D={class:"w-full md:w-1/2 lg:w-1/3"},w=s((()=>(0,r._)("h1",{class:"py-4 text-2xl font-medium text-center"},"訂購資訊",-1))),S={class:"mb-4 space-y-2"},P={class:"flex gap-2 justify-between items-center"},M=s((()=>(0,r._)("span",null,"訂購人姓名",-1))),C={class:"flex gap-2 justify-between items-center"},T=s((()=>(0,r._)("span",null,"訂購人電話",-1))),j={class:"flex gap-2 justify-between items-center"},I=s((()=>(0,r._)("span",null,"訂購人Email",-1))),L={class:"flex gap-2 justify-between items-center"},q=s((()=>(0,r._)("span",null,"寄件地址",-1))),z={key:1,class:"flex flex-col justify-center items-center space-y-8 min-h-[50vh]"},G=s((()=>(0,r._)("h1",{class:"rfs:text-2xl font-medium text-secondary-700"},"目前沒有訂單",-1)));function U(e,t,a,s,U,H){const A=(0,r.up)("CheckStep");return(0,r.wg)(),(0,r.iD)("section",n,[(0,r.Wm)(A,{active:`${s.steps}`},null,8,["active"]),(0,r._)("div",c,[0!==s.confirmData.total?((0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",l,[i,(0,r._)("ul",u,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.confirmData?.order?.products,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.id,class:"flex gap-4 justify-between items-center px-4 pb-4 border-b border-secondary-200"},[(0,r._)("div",p,[(0,r._)("img",{class:"object-cover w-20 h-20",src:e.product.imageUrl,alt:e.product.title},null,8,g),(0,r._)("div",h,[(0,r._)("h3",m,(0,o.zw)(e.product.title),1),(0,r._)("span",f,"數量："+(0,o.zw)(e.product.qty),1)])]),(0,r._)("span",$," NT$"+(0,o.zw)(s.moneyFormat(e.product.price,e.product.qty)),1)])))),128))]),(0,r._)("ul",b,[v,(0,r._)("li",k," NT$"+(0,o.zw)(s.confirmData?.order?.total),1),y,(0,r._)("li",x,(0,o.zw)(s.success?"已完成付款":"未完成付款"),1)])]),_,(0,r._)("div",D,[w,(0,r._)("ul",S,[(0,r._)("li",P,[M,(0,r._)("span",null,(0,o.zw)(s.confirmData.order.user?.name),1)]),(0,r._)("li",C,[T,(0,r._)("span",null,(0,o.zw)(s.confirmData.order.user?.tel),1)]),(0,r._)("li",j,[I,(0,r._)("span",null,(0,o.zw)(s.confirmData.order.user?.email),1)]),(0,r._)("li",L,[q,(0,r._)("span",null,(0,o.zw)(s.confirmData.order.user?.address),1)])]),(0,r._)("button",{type:"button",class:(0,o.C_)(["w-full text-secondary-700 rounded border-secondary-700 btn btn-outline",{disabled:s.paymentData.success,"cursor-not-allowed":s.paymentData.success,"opacity-30":s.paymentData.success,"hover:bg-secondary-700":!s.paymentData.success,"hover:text-secondary-100":!s.paymentData.success}]),onClick:t[0]||(t[0]=e=>s.handlePayment(s.confirmData.orderId))},"信用卡付款",2)])])):((0,r.wg)(),(0,r.iD)("div",z,[G,(0,r._)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>s.handleToProduct&&s.handleToProduct(...e)),class:"text-xl font-normal text-primary-600 hover:text-primary-100 hover:bg-primary-600 hover:border-primary-600 btn btn-lg btn-wide btn-outline"}," 看看其他商品吧 ")]))])])}var H=a(2262),A=a(2119),F=a(6978),O=a(9939),Q={components:{CheckStep:O.Z},setup(){const e=(0,A.tv)(),{orderStore:t}=(0,F.Z)(),{orderData:a,orderResult:o,handleGetOrderData:s}=t,n=(0,r.f3)("axios"),c="https://vue3-course-api.hexschool.io/v2/",d="club";function l(e,t){let a=e;return void 0!==t&&(a*=t),void 0!==e?Number(a.toFixed(1)).toLocaleString():0}const i=(0,H.iH)(2),u=(0,H.qj)({success:!1,order:{},total:0,user:{},is_paid:!1}),p=localStorage.getItem("order_id");function g(e){n.post(`${c}api/${d}/pay/${e}`).then((e=>{u.success=e.data.success,u.order=e.data.order,u.total=e.data.total,u.user=e.data.user,i.value=3,localStorage.removeItem("order_id")})).catch((e=>console.dir(e)))}function h(){e.push("product")}return(0,r.bv)((()=>{o.orderId?s(o.orderId):null!==p&&s(p)})),{steps:i,moneyFormat:l,handlePayment:g,paymentData:u,confirmData:(0,r.Fl)((()=>a)),orderId:p,handleToProduct:h,success:(0,r.Fl)((()=>u.success))}}},E=a(3744);const Z=(0,E.Z)(Q,[["render",U],["__scopeId","data-v-0b10de94"]]);var B=Z}}]);
//# sourceMappingURL=883.f1004f04.js.map