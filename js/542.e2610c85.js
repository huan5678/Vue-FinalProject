"use strict";(self["webpackChunkchill_bar"]=self["webpackChunkchill_bar"]||[]).push([[542],{6978:function(e,t,a){a.d(t,{Z:function(){return m}});var o=a(2262),r=a(2119),s=a(8262),n=a(9669),c=a.n(n);const i=(0,s.Q_)("admin",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t=(0,o.iH)(""),a=(0,o.iH)(""),s=(0,o.iH)(!1),n=(0,r.tv)(),i=(0,r.yj)(),d=function(){const e=document.cookie.split("; backendToken=");return e.length>1&&e.shift().split(";"),t.value=e,e},l=function(){t.value?(c().defaults.headers.common.Authorization=t.value,c().post(`${e}api/user/check`).then((e=>{s.value=e.data.success,"admin"!==i.name&&n.push("admin")})).catch((e=>{console.dir(e),s.value=e.response.data.success,n.push("login")}))):n.push("login")};function u(e){t.value=e.token,a.value=e.expired,s.value=!0,document.cookie=`backendToken=${e.token}; expires=${new Date(e.expired)};`}function g(){s.value=!1,t.value="",a.value="",c().post(`${e}logout`)}function p(){document.cookie=`backendToken=; expires=${new Date(0)};`}return{token:t,expired:a,isLoggedIn:s,handleSetLogin:u,handleSetLogout:g,handleCheckUser:l,handleGetToken:d,handleClearToken:p}}));const d=(0,s.Q_)("adminData",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,o.qj)({selectedTarget:"product",selectedTargetIndex:0,dataList:[],pagination:{},currentPage:1,category:null,tempProduct:{},isOpenModal:!1,errorMessage:""}),r=(0,o.qj)({selected:""});function s(){a.tempProduct={}}function n(e,t){r.selected=e,a.tempProduct=t}function d(e=!1){a.isOpenModal=e}const l=i();function u(){let o=a.selectedTarget;switch(o){case"product":o="products/all";break;case"order":o="orders";break;case"coupon":o="coupons";break;case"article":o="articles";break;default:o="products";break}c().get(`${e}api/${t}/admin/${a.selectedTarget}`,{token:l.token}).then((e=>{a.dataList=e.data[`${o}`]})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function g(o,r){let s=a.selectedTarget;switch(s){case"product":s="products";break;case"order":s="orders";break;case"coupon":s="coupons";break;case"article":s="articles";break;default:s="products";break}let n=o;void 0===o&&(n=a.currentPage);let i=`&category=${r}`;null!==r&&void 0!==r||(i=""),c().get(`${e}api/${t}/admin/${s}/?page=${n}${i}`,{token:l.token}).then((e=>{a.dataList=e.data[`${s}`],a.pagination=e.data.pagination})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function p(o,r){c().put(`${e}api/${t}/admin/${a.selectedTarget}/${o}`,r,{token:l.token}).then((()=>{g(a.currentPage,a.category)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function h(o=null){let r=a.selectedTarget;switch(r){case"order":r="orders/all";break;case"coupon":r="coupon";break;case"article":r="article";break;default:r="product";break}c()["delete"](`${e}api/${t}/admin/${r}/${o}`,{token:l.token}).then((()=>{g(a.currentPage,a.category)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function m(o){c().post(`${e}api/${t}/admin/${a.selectedTarget}`,o,{token:l.token}).then((()=>{g(a.currentPage)})).catch((e=>{console.dir(e)}))}function b(a){const o=new FormData;return o.append("file-to-upload",a),c().post(`${e}api/${t}/admin/upload`,o,{token:l.token})}return{adminData:a,functionSelected:r,handleControlModal:d,handleCreateData:m,handleGetDataAll:u,handleGetDataList:g,handleEditData:p,handleDeleteData:h,handleImageUpload:b,handleSelectFunction:n,handleResetTempProduct:s}}));const l=(0,s.Q_)("product",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,o.qj)({products:[],pagination:{},currentPage:1,productDetail:{},selectCategory:"",errorMessage:"",productMainImage:"",productImages:[]}),r=(0,o.iH)(""),s=(0,o.iH)([{title:"全品項",category:"All"},{title:"伏特加",category:"vodka"},{title:"琴酒",category:"gin"},{title:"威士忌",category:"whisky"},{title:"龍舌蘭",category:"tequila"},{title:"蘭姆酒",category:"rum"},{title:"白蘭地",category:"brandy"}]);function n(e){const t=e.filter((e=>""!==e.imageUrl));return t}function i(){c().get(`${e}api/${t}/products/all`).then((e=>{a.products=n(e.data.products)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function d(o="",r=a.currentPage){let s=o;"All"===o&&(s=""),c().get(`${e}api/${t}/products?page=${r}&category=${s}`).then((e=>{a.products=n(e.data.products),a.pagination=e.data.pagination})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`}))}function l(e){a.productMainImage=e}function u(o){r.value=o,c()(`${e}api/${t}/product/${o}`).then((e=>{r.value="",a.productDetail=e.data.product,a.productMainImage=e.data.product.imageUrl,a.productImages=[...e.data.product.imagesUrl],a.productImages.push(e.data.product.imageUrl)})).catch((e=>{a.errorMessage=`產生錯誤: ${e}`,r.value=""}))}return{productList:a,handleGetProductAll:i,handleGetProductList:d,productCategory:s,handleGetProductDetail:u,handleProductMainImage:l,isLoading:r}}));const u=(0,s.Q_)("order",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,o.qj)({success:!1,message:"",total:0,create_at:0,orderId:""}),r=(0,o.qj)({success:!1,orders:[],pagination:{},message:[]}),s=(0,o.qj)({success:!1,order:{},total:0,user:{}});function n(o){c().post(`${e}api/${t}/order`,{data:{user:{name:o.name,email:o.email,tel:o.tel,address:o.address},message:o.message}}).then((e=>(a.success=e.data.success,a.message=e.data.message,a.total=e.data.total,a.create_at=e.data.create_at,a.orderId=e.data.orderId,localStorage.setItem("order_id",e.data.orderId),e.data.success))).catch((e=>{console.dir(e)}))}function i(a){c().get(`${e}api/${t}/order/${a}`).then((e=>(s.success=e.data.success,s.order=e.data.order,s.total=e.data.total,s.user=e.data.user,e.data.success))).catch((e=>(console.dir(e),e.response.success)))}function d(){c().get(`${e}api/${t}/orders`).then((e=>{r.success=e.data.success,r.orders=e.data.orders,r.pagination=e.data.pagination,r.message=e.data.message})).catch((e=>{console.dir(e)}))}return{orderResult:a,orderList:r,orderData:s,handleSendOrder:n,handleGetOrderList:d,handleGetOrderData:i}}));const g=(0,s.Q_)("cart",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,o.qj)({data:{},message:"",list:[],totalPrice:0,finalPrice:0,isOpenCart:!1,resultPrice:0,checkoutStep:1,errorMessage:""}),r=(0,o.iH)("");function s(e){a.resultPrice=e}function n(e){a.checkoutStep=e}function i(){c().get(`${e}api/${t}/cart`).then((e=>{a.list=e.data.data.carts,a.totalPrice=e.data.data.total,a.finalPrice=e.data.data.final_total})).catch((e=>{a.errorMessage=e.data.message}))}function d(o,s=1){r.value=o,c().post(`${e}api/${t}/cart`,{data:{product_id:o,qty:s}}).then((e=>{a.data=e.data.data,a.message=e.data.message,r.value="",i()})).catch((e=>{a.errorMessage=e.data.message,r.value=""}))}function l(o){r.value=o,c()["delete"](`${e}api/${t}/cart/${o}`).then((e=>{a.message=e.data.message,r.value="",i()})).catch((e=>{a.errorMessage=e.data.message,r.value=""}))}function u(o,s){r.value=o,c().put(`${e}api/${t}/cart/${o}`,{data:{product_id:o,qty:s}}).then((e=>{a.message=e.data.message,r.value="",i()})).catch((e=>{a.errorMessage=e.data.message,r.value=""}))}function g(){c()["delete"](`${e}api/${t}/carts`).then((e=>{a.message=e.data.message,i()})).catch((e=>{a.errorMessage=e.data.message}))}return{cartData:a,isLoading:r,handleAddCart:d,handleGetCart:i,handleDeleteCart:l,handleUpdateCart:u,handleClearCart:g,handleSetResult:s,handleSetCheckoutStep:n}}));const p=(0,s.Q_)("coupon",(()=>{const e="https://vue3-course-api.hexschool.io/v2/",t="club",a=(0,o.qj)({couponList:[{name:"驚喜大禮包",code:"5d003b6e",price:-550,rules:"minus"},{name:"不是酒折給你打8折",code:"366ea893",price:.8,rules:"cross"},{name:"老闆請你喝一杯",code:"e02c47e7",price:-400,rules:"minus"},{name:"你是醉棒的",code:"db13f8e5",price:-200,rules:"minus"}],message:"",finalTotal:0});function r(o){c().post(`${e}api/${t}/coupon`,{data:{code:o}}).then((e=>(a.message=e.data.message,a.finalTotal=e.data.data.final_total,e.data.success))).catch((e=>{console.dir(e)}))}return{couponData:a,handleUseCoupon:r}}));const h=(0,s.Q_)("bookingDates",(()=>{const e="https://esc-cros-anywhere.herokuapp.com/",t="https://chill-bar-sp.herokuapp.com",a="api/v1",r=(0,o.qj)({bookingList:[],bookingData:{},tempData:{},isLoading:!1,errorMessage:""});function s(){r.tempData={}}function n(){c().get(`${e}${t}/${a}/dates`).then((e=>{r.bookingList=e.data})).catch((e=>{r.errorMessage=`產生錯誤: ${e}`}))}function i(o){c().get(`${e}${t}/${a}/date/${o}`).then((e=>{r.bookingData=e.data.order})).catch((e=>{r.errorMessage=`產生錯誤: ${e}`}))}function d(o,s){c().put(`${e}${t}/${a}/date/${o}`,s).then((()=>{n()})).catch((e=>{r.errorMessage=`產生錯誤: ${e}`}))}function l(o=null){c()["delete"](`${e}${t}/${a}/date/${o}`).then((()=>{n()})).catch((e=>{r.errorMessage=`產生錯誤: ${e}`}))}function u(o){r.isLoading=!0,c().post(`${e}${t}/${a}/date`,o).then((()=>{n(),r.isLoading=!1})).catch((e=>{r.errorMessage=`產生錯誤: ${e}`}))}return{datesData:r,handleGetBookingDataAll:n,handleGetBookingData:i,handleEditBookingData:d,handleDeleteBookingData:l,handleCreateBookingData:u,handleResetTempData:s}}));function m(){const e=i(),t=d(),a=l(),o=u(),r=g(),s=p(),n=h();return{adminStore:e,adminDataStore:t,productStore:a,orderStore:o,cartStore:r,couponStore:s,bookingStore:n}}},1542:function(e,t,a){a.r(t),a.d(t,{default:function(){return oe}});var o=a(6252),r=a(3577);const s={class:"py-6 bg-secondary-50"},n={class:"container space-y-4"},c=(0,o.Uk)(" 產品列表 "),i={class:"flex justify-center items-center"},d={class:"grid grid-cols-2 gap-4 pb-4 md:tabs"},l=["onClick","onKeydown"],u={key:0},g={class:"flex flex-col gap-4 justify-between md:flex-row"},p={class:"order-1 md:order-none"},h={class:"mb-4 font-serif text-4xl font-medium text-center text-primary-400 border-b md:text-left"},m=["innerHTML"],b={class:"md:order-none order-0"},y=["src","alt"],f={key:0,class:"flex gap-4 justify-center items-center pb-12 mx-auto"},$=["disabled"],k=(0,o._)("i",{class:"bi bi-arrow-left"},null,-1),v=[k],_=["onClick"],C=["disabled"],w=(0,o._)("i",{class:"bi bi-arrow-right"},null,-1),x=[w];function D(e,t,a,k,w,D){const L=(0,o.up)("AppTitle"),M=(0,o.up)("SvgLoader"),P=(0,o.up)("ProductCard");return(0,o.wg)(),(0,o.iD)("section",s,[(0,o._)("div",n,[(0,o.Wm)(L,{level:"1",class:"rfs:text-5xl"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o._)("div",i,[(0,o._)("div",d,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(k.productCategory,((e,t)=>((0,o.wg)(),(0,o.iD)("a",{class:(0,r.C_)(["flex gap-2 justify-center items-center w-full rfs:text-lg transition-all duration-500 md:w-auto md:tab",{"hover:border-primary-600":k.selectCategory!==e.category,"hover:text-primary-500":k.selectCategory!==e.category,"tab-active":k.selectCategory===e.category,"text-primary-600 hover:text-primary-500":k.selectCategory===e.category,"col-span-2":0===t}]),onClick:t=>k.handleCategoryChange(e.category),onKeydown:e,key:e.title},[(0,o.Wm)(M,{name:`icon-${e.category}`,class:"w-8 h-8"},null,8,["name"]),(0,o.Uk)(" "+(0,r.zw)(e.title),1)],42,l)))),128))])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(k.articles,(e=>((0,o.wg)(),(0,o.iD)(o.HY,{key:e.id},["All"!==k.selectCategory?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,r.C_)(["p-4",{hidden:e.tag[0]!==k.selectCategory}])},[e.tag[0]===k.selectCategory?((0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",g,[(0,o._)("article",p,[(0,o._)("h2",h,(0,r.zw)(e.title),1),(0,o._)("div",{class:"space-y-2 font-serif text-lg font-light text-secondary-400",innerHTML:e.description},null,8,m)]),(0,o._)("figure",b,[(0,o._)("img",{class:"aspect-square object-cover",width:"960",height:"540",src:e.image,alt:e.title},null,8,y)])])])):(0,o.kq)("",!0)],2)):(0,o.kq)("",!0)],64)))),128)),(0,o._)("ul",{class:(0,r.C_)(["grid gap-4 pb-4 mb-4 md:grid-cols-3 lg:grid-cols-4","All"===k.selectCategory||""===k.selectCategory?"grid-cols-2":"grid-cols-1"])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(k.productList,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"",key:e.id},[(0,o.Wm)(P,{product:e},null,8,["product"])])))),128))],2),"All"===k.selectCategory||""===k.selectCategory?((0,o.wg)(),(0,o.iD)("ul",f,[(0,o._)("li",null,[(0,o._)("button",{type:"button",class:(0,r.C_)(["py-1 px-2 text-secondary-300 rounded border disabled:text-secondary-300 disabled:bg-secondary-100 border-secondary-300 disabled:border-secondary-100",k.pagination?.has_pre?"hover:bg-secondary-400 hover:border-secondary-400 hover:text-white":""]),disabled:!k.pagination?.has_pre,onClick:t[0]||(t[0]=e=>k.handlePaginationAction(k.pagination?.current_page-1))},v,10,$)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(k.pagination?.total_pages,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e+(new Date).getMilliseconds()},[(0,o._)("button",{type:"button",class:(0,r.C_)(["py-1 px-3 rounded",e===k.pagination?.current_page?"border-secondary-600 text-secondary-500\n              border":"text-secondary-300 hover:text-secondary-600\n              "]),onClick:t=>k.handlePaginationAction(e)},(0,r.zw)(e),11,_)])))),128)),(0,o._)("li",null,[(0,o._)("button",{type:"button",class:(0,r.C_)(["py-1 px-2 text-secondary-300 rounded border disabled:text-secondary-300 disabled:bg-secondary-100 border-secondary-300 disabled:border-secondary-100",k.pagination?.has_next?"hover:bg-secondary-400 hover:border-secondary-400 hover:text-white":""]),disabled:!k.pagination?.has_next,onClick:t[1]||(t[1]=e=>k.handlePaginationAction(k.pagination?.current_page+1))},x,10,C)])])):(0,o.kq)("",!0)])])}var L=a(2262),M=a(9669),P=a.n(M),S=a(6978);const T={class:"h-full shadow card bg-base-100"},A={class:"overflow-clip"},j=["src","alt"],q={class:"p-4 space-y-4"},H={class:"text-xl text-center"},I={class:"flex justify-between"},G=(0,o._)("span",null,"原價",-1),U={class:"line-through"},z={class:"flex justify-between"},O=(0,o._)("span",null,"特價",-1),F={class:"text-xl"},K={class:"p-4 w-full card-actions"},Q=["disabled"],B=["disabled"],Y=(0,o._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Z=(0,o._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962\n            7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),R=[Y,Z],W=(0,o.Uk)(" 加入購物車 ");function E(e,t,a,s,n,c){return(0,o.wg)(),(0,o.iD)("div",T,[(0,o._)("div",{class:"group h-full cursor-pointer",onClick:t[0]||(t[0]=e=>s.handleOpenProductDetail(s.products.id)),onKeydown:t[1]||(t[1]=e=>s.handleOpenProductDetail(s.products.id))},[(0,o._)("figure",A,[(0,o._)("img",{src:s.products.imageUrl,alt:s.products.title,class:"object-cover w-full max-h-48 transition-all duration-700 ease-[cubic-bezier(0.4,0,0.2,1)] group-hover:scale-110"},null,8,j)]),(0,o._)("ul",q,[(0,o._)("li",null,[(0,o._)("h2",H,(0,r.zw)(s.products.title),1)]),(0,o._)("li",I,[G,(0,o._)("span",U,(0,r.zw)(s.products.origin_price),1)]),(0,o._)("li",z,[O,(0,o._)("span",F,(0,r.zw)(s.products.price),1)])])],32),(0,o._)("div",K,[(0,o._)("button",{type:"button",class:(0,r.C_)(["w-full hover:text-base font-normal text-gray-50 bg-secondary-400 hover:bg-secondary-700 transition-all duration-500 ease-[cubic-bezier(0.4,0,1,1)] btn",s.isLoading===s.products.id?"bg-gray-300 hover:bg-gray-300":""]),disabled:s.isLoading===s.products.id,onClick:t[2]||(t[2]=e=>s.handleAddCart(s.products.id))},[((0,o.wg)(),(0,o.iD)("svg",{class:(0,r.C_)(["mr-3 -ml-1 w-5 h-5 text-gray-300 animate-spin",s.isLoading===s.products.id?"":"hidden"]),disabled:s.isLoading===s.products.id,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},R,10,B)),W],10,Q)])])}var V=a(2119),J={props:["product"],setup(e){const t={...e.product},{cartStore:a}=(0,S.Z)(),{handleAddCart:r}=a,s=(0,V.tv)();function n(e){s.push({path:`/detail/${e}`})}return{products:t,handleAddCart:r,isLoading:(0,o.Fl)((()=>a.isLoading)),handleOpenProductDetail:n}}},N=a(3744);const X=(0,N.Z)(J,[["render",E]]);var ee=X,te={components:{ProductCard:ee},setup(){const{productStore:e}=(0,S.Z)(),{productList:t,handleGetProductList:a,productCategory:r,isLoading:s}=e,n="https://vue3-course-api.hexschool.io/v2/",c="club",i=(0,L.iH)([]),d=(0,o.Fl)({get(){return t.selectCategory},set(e){t.selectCategory=e}});function l(){P().get(`${n}api/${c}/articles`).then((e=>{i.value=e.data.articles})).catch((e=>{console.error(e)}))}function u(e){d.value=e,a(e,t.currentPage)}function g(e){window.scrollTo({top:0,behavior:"smooth"}),a(t.selectCategory,e)}return(0,o.bv)((()=>{l(),a(t.selectCategory)})),{selectCategory:d,productList:(0,o.Fl)((()=>t.products)),productCategory:(0,o.Fl)((()=>r)),handleCategoryChange:u,isLoading:(0,o.Fl)((()=>s)),pagination:(0,o.Fl)((()=>t.pagination)),handlePaginationAction:g,articles:i}}};const ae=(0,N.Z)(te,[["render",D]]);var oe=ae}}]);
//# sourceMappingURL=542.e2610c85.js.map